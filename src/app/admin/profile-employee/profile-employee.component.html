<ng-http-loader
  backgroundColor="#4b244a"
  spinner="sk-chasing-dots"></ng-http-loader>
<div class="content">
  <div style="overflow: auto; height: 90vh" class="bloc-container">
    <div
      style="display: flex; justify-content: space-between"
      class="mt-3 mb-3">
      <div class="user-info">
        <div class="personal-image d-flex user-info">
          <label class="hoverable" for="fileInput">
            <img [src]="avatar ? avatar : 'assets/avatar.png'" />
            <div class="hover-text">Choose file</div>
            <div class="background"></div>
          </label>
          <br />
          <input id="fileInput" type="file" (change)="onSelectFile($event)" />
          <div style="padding-left: 10px">
            <h5>{{ first_name + ' ' + last_name }}</h5>
            <h6
              style="color: #ef8200; padding-top: 10px"
              class="d-flex justify-content-start">
              {{ position_name }}
            </h6>
          </div>
        </div>
      </div>
      <div class="mx-4">
        <app-change-password></app-change-password>
      </div>
    </div>

    <div class="basic-informations">
      <h5 class="title">{{ 'Informations de base ' }}</h5>
      <!-- information de base -->

      <form>
        <div class="mb-2">
          <label for="username" class="form-label">Nom </label>
          <input
            required
            type="text"
            class="form-control"
            id="username"
            aria-describedby="username"
            name="first_name"
            [(ngModel)]="first_name" />
        </div>
        <div class="mb-2">
          <label for="username" class="form-label">Prénom </label>
          <input
            required
            type="text"
            class="form-control"
            aria-describedby="username"
            name="last_name"
            [(ngModel)]="last_name" />
        </div>
        <div class="mb-2">
          <label class="form-label">{{ 'Genre' }}</label>
          <select class="form-select" [(ngModel)]="gender" name="gender">
            <option *ngFor="let genre of genreList" [value]="genre.id">
              {{ genre.name }}
            </option>
          </select>
        </div>
        <div class="mb-2">
          <label class="form-label"> {{ 'Date de naissance ' }}</label>
          <input
            type="date"
            class="form-control"
            [(ngModel)]="birth_date"
            name="birth_date" />
        </div>
        <div class="mb-2">
          <label class="form-label">{{ 'Adresse email' }}</label>
          <input
            type="email"
            class="form-control"
            [(ngModel)]="email"
            name="email" />
        </div>

        <div class="mb-2">
          <label class="form-label">{{ 'Telephone' }}</label>
          <input
            type="tel"
            class="form-control"
            [(ngModel)]="contact"
            name="contact" />
        </div>

        <div class="mb-2">
          <label for="inputAddress" class="form-label">{{ 'Addresse' }}</label>
          <input
            type="text"
            class="form-control"
            id="inputAddress"
            minlength="3"
            [(ngModel)]="address"
            name="address" />
        </div>

        <div class="mb-2">
          <label class="form-label">État civil</label>
          <select
            class="form-select"
            [(ngModel)]="maritalStatus"
            name="maritalStatus">
            <option
              class="select-option"
              *ngFor="let status of maritalStatusList"
              [value]="status.id">
              {{ status.name }}
            </option>
          </select>
        </div>
      </form>
      <div class="Position">
        <h5 class="title">{{ 'Poste' }}</h5>

        <form>
          <div *ngIf="role_employee === 'employee'" class="mb-2 d-flex">
            <label class="form-label">Poste occupé</label>

            <select class="form-select" [(ngModel)]="position" name="position">
              <option
                class="select-option"
                *ngFor="let position of positions"
                [value]="position.id">
                {{ position.position_name }}
              </option>
            </select>
          </div>

          <div class="mb-2 d-flex" *ngIf="role_employee !== 'accountant'">
            <label class="form-label">Département</label>
            <select
              class="form-select"
              [(ngModel)]="department"
              name="department"
              (change)="getIdDepartment(department)">
              <option
                class="select-option"
                *ngFor="let dep of departments"
                [value]="dep.department_id">
                {{ dep.department_name }}
              </option>
            </select>
          </div>
          <div
            class="mb-2 d-flex"
            *ngIf="disabled && role_employee === 'employee'">
            <label class="form-label">Equipe</label>
            <select class="form-select" [(ngModel)]="team" name="team">
              <option
                class="select-option"
                *ngFor="let team of teams"
                [value]="team.team_id">
                {{ team.team_name }}
              </option>
            </select>
          </div>

          <div class="mb-2 d-flex">
            <label class="form-label">Rôle</label>
            <select class="form-select" [(ngModel)]="role" name="role">
              <option
                class="select-option"
                *ngFor="let role of roles"
                [value]="role.value">
                {{ role.name }}
              </option>
            </select>
          </div>

          <div class="mb-2 d-flex">
            <label class="form-label">Date d’entrée</label>
            <p class="mx-3">{{ joinDate }}</p>
          </div>
        </form>

        <div class="social-networks">
          <h5 class="title">{{ 'Social Media' }}</h5>
          <!-- information de base -->

          <form>
            <div class="mb-2">
              <label class="form-label">Facebook </label>
              <input
                required
                class="form-control"
                id="Facebook"
                [(ngModel)]="facebook"
                name="facebook" />
            </div>

            <div class="mb-2">
              <label class="form-label">Twitter </label>
              <input
                required
                class="form-control"
                id="Twitter"
                [(ngModel)]="twitter"
                name="twitter" />
            </div>

            <div class="mb-2">
              <label class="form-label">LinkedIn </label>
              <input
                required
                class="form-control"
                id="LinkedIn"
                [(ngModel)]="linkedin"
                name="linkedin" />
            </div>

            <div class="mb-2">
              <label class="form-label">Discord </label>
              <input
                required
                class="form-control"
                id="Discord"
                [(ngModel)]="discord"
                name="discord" />
            </div>

            <div class="mb-2" style="padding-left: 170px">
              <button
                mat-button
                style="margin-bottom: 25px"
                class="btn btn-primary"
                type="button">
                +Ajouter plus
              </button>

              <button
                mat-button
                class="btn btn-primary"
                style="display: block; width: 100%"
                type="submit"
                (click)="onClick()">
                Enregister
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <app-right-sidebar class="right-index"></app-right-sidebar>
</div>
