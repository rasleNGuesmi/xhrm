<div class="featured-image">
  <app-guest-layout>
    <div class="form-wrapper" *ngIf="afficherBlock1">
      <div class="email-validation">
        <h2 class="title">Mot de passe oublié ?</h2>
        <h5 class="underTitle">
          {{
            "Veuillez saisir l'adresse e-mail associée à votre compte. nous vous enverrons un code par e-mail pour réinitialiser votre mot de passe."
          }}
        </h5>
        <form>
          <input
            required
            [formControl]="emailControl"
            type="email"
            class="form-control"
            id="emailfield"
            aria-describedby="emailHelp"
            pattern="^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$" />
          <div *ngIf="emailControl.invalid && emailControl.touched">
            <small style="font-size: 10px; color: #000000; text-align: center"
              >Veuillez saisir une adresse email valide
            </small>
          </div>
          <button
            class="btn btn-primary"
            type="submit"
            style="margin-top: 70px"
            (click)="clickStep2()">
            Envoyer
          </button>
        </form>
      </div>
    </div>

    <div class="code-verification form-wrapper" *ngIf="afficherBlock2">
      <h1 class="title">{{ 'Vérification' }}</h1>
      <h5 class="underTitle">
        Un code de vérification a été envoyé à
        <span style="text-decoration: underline">test@xtend.com</span>. Veuillez
        le saisir ci-dessous.
      </h5>

      <form class="row">
        <div class="pin-container">
          <input
            class="pin-box col-3"
            *ngFor="let digit of digits; let i = index"
            type="text"
            (input)="onInput(i)"
            (delete)="onDelete(i)"
            maxlength="1"
            numOnly
            [name]="'pin' + i"
            [(ngModel)]="digits[i]" />
        </div>
        <button
          class="btn btn-primary"
          style="display: block; margin-top: 20%"
          type="submit"
          (click)="clickStep3()">
          Continuer
        </button>
      </form>
    </div>

    <div *ngIf="afficherBlock3">
      <form class="form-wrapper">
        <h2 class="title">{{ 'Réinitialiser votre mot de passe' }}</h2>

        <div class="mb-3">
          <label class="form-label">Nouveau Mot de passe</label>
          <div
            class="input-group"
            style="display: flex; justify-content: flex-end !important">
            <input
              [type]="visible ? 'password' : 'text'"
              class="form-control"
              formControlName="password" />

            <span (click)="password_visible()" class="input-group-text"
              ><mat-icon
                style="color: #0075d6"
                [style.display]="visible ? 'none' : 'contents'"
                >visibility
              </mat-icon>
              <mat-icon
                style="color: #0075d6"
                [style.display]="visible ? 'contents' : 'none'"
                >visibility_off
              </mat-icon></span
            >
          </div>
        </div>
        <label class="form-label"> Confirmer le mot de passe</label>
        <div
          class="input-group"
          style="display: flex; justify-content: flex-end !important">
          <input
            [type]="visible ? 'password' : 'text'"
            class="form-control"
            formControlName="password" />

          <span
            (click)="password_visible2()"
            class="input-group-text"
            id="basic-addon2"
            ><mat-icon
              style="color: #0075d6"
              [style.display]="visible2 ? 'none' : 'contents'"
              >visibility
            </mat-icon>
            <mat-icon
              style="color: #0075d6"
              [style.display]="visible2 ? 'contents' : 'none'"
              >visibility_off
            </mat-icon></span
          >
        </div>

        <span class="error" *ngIf="password.hasError('pattern')"
          >Password must be at least 12 characerts.
        </span>
        <br />
        <span class="error" *ngIf="password.hasError('pattern')"
          >Include lowercase, uppercase and numbers.</span
        >

        <div class="form-button">
          <button
            class="btn btn-primary"
            type="submit"
            style="margin-top: 30px">
            Sauvegarder
          </button>
        </div>
      </form>
    </div>

    <div class="create-account-wrapper">
      <p class="mb-2 mt-3">
        <small class="text-dark">Vous n'avez pas un compte ? </small> <br />
        <a class="create-account-btn" href="/guest/signup"
          >CREER VOTRE COMPTE ADMIN
        </a>
      </p>
    </div>
  </app-guest-layout>
</div>
